#! /usr/bin/env bash

mkdir -p build
cd build
cmake -DPICO_BOARD=pico -DPICO_PLATFORM=rp2040 ..
#cmake -DBUTTON_ENCODER=1 -DPICO_BOARD=pico -DPICO_PLATFORM=rp2040 -DPICO_SDK_PATH=~/pico/pico-sdk ..
make
cd ..

cp build/picorx.uf2 .
zip binaries-rp2040-pico.zip picorx.uf2
rm picorx.uf2

mkdir -p build_pico2
cd build_pico2
cmake -DPICO_BOARD=pico2 -DPICO_PLATFORM=rp2350 ..
#cmake -DBUTTON_ENCODER=1 -DPICO_BOARD=pico2 -DPICO_PLATFORM=rp2350 -DPICO_SDK_PATH=~/pico/pico-sdk ..
make
cd ..

cp build_pico2/pico2rx.uf2 .
zip -r binaries-rp2350-pico2.zip pico2rx.uf2
rm pico2rx.uf2

mkdir -p build_pico2_riscv
cd build_pico2_riscv
cmake -DPICO_BOARD=pico2 -DPICO_PLATFORM=rp2350-riscv -DPICO_TOOLCHAIN_PATH=~/riscv32-embecosm-centos7-gcc13.2.0 ..
#cmake -DBUTTON_ENCODER=1 -DPICO_BOARD=pico2 -DPICO_PLATFORM=rp2350-riscv -DPICO_TOOLCHAIN_PATH=~/riscv32-embecosm-centos7-gcc13.2.0 -DPICO_SDK_PATH=~/pico/pico-sdk ..
make
cd ..

cp build_pico2_riscv/pico2rx-riscv.uf2 .
zip -r binaries-rp2350-riscv-pico2.zip pico2rx-riscv.uf2
rm pico2rx-riscv.uf2
